language: node_js
cache:
    directories:
        - node_modules # NPM packages
install: npm ci
jobs:
    include:
        - stage: test
          script: npm run lint:ci && npm run test:ci && npm run e2e:ci
        - stage: deploy
          install: skip
          before_deploy: npm run build:ci
          skip_cleanup: true
          keep_history: true
          provider: pages
          script: 'true'
          local_dir: www
          repo: ourchitecture/ourchitecture.github.com
          github_token: $GITHUB_TOKEN
          target_branch: master
          on:
              branch: master
